system:
  ip_address: 10.0.0.1
  application_file: "autolamella"
  application_file_rectangle: "autolamella"
  #application_file_rectangle: "Si_Alex"
  application_file_cleaning_cross_section: "autolamella"
  plasma_gas: "Xenon" # proper case, e.g. Argon, Oxygen
  high_voltage: 30000 # volts
  stage_rotation_flat_to_electron: 50 # degrees
  stage_rotation_flat_to_ion: 230 # degrees
  pretilt_angle: 27 # degrees (flat to electron tilt)
  stage_tilt_flat_to_ion: 52 # degrees
  stage_tilt_landing: 13 # degrees
  piescope_enabled: False
  high_throughput: False
  autolamella: False
initial_position:
  sample_grid: # need to check the coordinate systems
    x: -3.2375e-3
    y: 3.9354e-3
    z: 30.95e-3
    coordinate_system: "Raw"
  landing_grid:
    # x is +6 mm from sample grid center
    x: 2.76265e-3 # x: 2.76265e-3
    # y is the same as sample grid center
    y: 3.9354e-3 # y: 3.9354e-3
    # z is the same as sample grid center
    z: 31.379e-3 # z: 31.379e-3
    coordinate_system: "Raw"
imaging:
  horizontal_field_width: 150e-6 # ion beam horizontal field of view (meters)
  dwell_time: 1e-6
  resolution: "1536x1024"
  imaging_current: 30.e-12 # 20pA, 20kV for Ar, 30pA, 30kV for Xe # 3kV eB
  save: False
  autocontrast: True
  max_eb_hfw: 2700.0e-6
  max_ib_hfw: 900.0e-6
  milling_current: 1.0e-9
gamma:
  correction: True
  min_gamma: 0.15
  max_gamma: 1.8
  scale_factor: 0.01
  threshold: 46 # px
reference_images:
  landing_post_ref_img_hfw_lowres: 400e-6
  landing_post_ref_img_hfw_highres: 150e-6
  trench_area_ref_img_hfw_lowres: 400e-6
  trench_area_ref_img_hfw_highres: 80e-6
  needle_ref_img_hfw_lowres: 150e-6
  needle_ref_img_hfw_highres: 80e-6
  landing_lamella_ref_img_hfw_lowres: 150e-6
  landing_lamella_ref_img_hfw_highres: 80e-6
  grid_ref_img_hfw_lowres: 2750e-6
  grid_ref_img_hfw_highres: 900e-6
  milling_ref_img_hfw_lowres: 150e-6
  milling_ref_img_hfw_highres: 50e-6
  liftout_ref_img_hfw_lowres: 180e-6
  liftout_ref_img_hfw_highres: 80e-6
  thinning_ref_img_hfw_lowres: 400e-6
  thinning_ref_img_hfw_medres: 150e-6
  thinning_ref_img_hfw_highres: 80e-6
  thinning_ref_img_hfw_superres: 30e-6
calibration:
  eucentric_hfw_lowres: 900e-6
  eucentric_hfw_midres: 400e-6
  eucentric_hfw_highres: 200e-6
  eucentric_height_eb: 4.0e-3
  eucentric_height_ib: 16.5e-3
  eucentric_height_tolerance: 0.5e-3
  drift_correction_hfw_highres: 80e-6
  stage_height_limit: 3.7e-3 # relative coordinates
lamella:
  lamella_width: 12.0e-6 # in meters
  lamella_height: 5.0e-6 # in meters
  milling_depth: 10.0e-6 # default milling depth, unless otherwise specified # zebra 2.2
  milling_current: 4.0e-9  # default milling current, unless otherwise specified # zebra 2.4e-9 0.74e-9
  stress_relief_offset: 10.0e-6
  size_ratio: 1.0 # the ratio between the upper trench and the lower trench (1 = symmetric, 2 = upper twice as large as lower )
  protocol_stages: # stages will be milled in the order they appear here
    # rough cut
    - milling_current: 4.0e-9
      offset: 2.0e-6
      trench_height: 2.0e-6
    # regular cut
    - milling_current: 4.0e-9
      offset: 0.0e-6
      trench_height: 5.0e-6
machine_learning:
  weights: boost_n05_model.pt
jcut:
  milling_current: 1.0e-9 # in Amps
  jcut_angle: 6  # in degrees (relative from trench)
  length: 12e-6 # in meters
  height: 5e-6 # in meters
  trench_thickness: 1e-6 # in meters
  milling_depth: 3e-6 # in meters
  extra_bit: 8e-6  # J-cut should extend out a little past the lamella
weld:
  width: 3.e-6
  height: 5.e-6
  depth: 15.e-9
  rotation: 0
sharpen:
  height: 2.5e-6
  width:  20.e-6
  depth: 8.e-6
  bias: 0.25e-6
  hfw: 150.e-6
  tip_angle: 10
  needle_angle: 40
  milling_current: 15.0e-9 # in Amps
cut:
  width: 10.e-6
  height: 0.5e-6
  depth: 25.e-6
  rotation: 0
  hfw: 100.e-6
  gap: 2.e-6
  hgap: 4.e-6
flatten_landing:
  width: 2.e-6
  height: 25.e-6
  depth: 10.e-6
  milling_current: 15.0e-9
thin_lamella:
  hfw: 50.e-6
  resolution: "3072x2048"
  dwell_time: 200.e-9
  rotation_angle: 50 # deg (raw)
  tilt_angle: 12 # deg
  lamella_width: 6.0e-6 # in meters
  lamella_height: 1.0e-6 # in meters
  milling_depth: 0.4e-6 # default milling depth, unless otherwise specified # zebra 2.2
  milling_current: 0.1e-9  # default milling current, unless otherwise specified # zebra 2.4e-9 0.74e-9
  size_ratio: 1.0 # the ratio between the upper trench and the lower trench (1 = symmetric, 2 = upper twice as large as lower )
  offset: 1.0e-6
  trench_height: 2.0e-6
  # Protocol stages are milled in the order they appear here.
  # Stages may override the default parameters above Eg: current, depth, etc.
  protocol_stages:
  # Rough cut, stage 1
  - offset: 1.0e-6
    trench_height: 1.5e-6 
  # Regular cut, stage 2
  - offset: 0.5e-6
    trench_height: 1.e-6
    lamella_height: 1.0e-6
polish_lamella:
  hfw: 50.e-6
  resolution: "3072x2048"
  dwell_time: 200.e-9 
  rotation_angle: 50 # deg (raw)
  tilt_angle: 12 # deg
  tilt_offset: 1 # deg
  lamella_width: 6.0e-6 # in meters
  lamella_height: 0.45e-6 # in meters
  milling_depth: 0.4e-6 # default milling depth, unless otherwise specified # zebra 2.2
  milling_current: 30.e-12  # default milling current, unless otherwise specified # zebra 2.4e-9 0.74e-9
  size_ratio: 1.0 # the ratio between the upper trench and the lower trench (1 = symmetric, 2 = upper twice as large as lower )
  offset: 0.0e-6
  trench_height: 0.2e-6
fiducial:
  length: 10.0e-6
  width: 0.25e-6
  depth: 5.e-6
  rotation: 0 # deg
  milling_current: 4.0e-9
reduced_area: 
  # x: 0.35
  # y: 0.35
  # dx: 0.25
  # dy: 0.3
  # x: 0.05
  # y: 0.25
  # dx: 0.3
  # dy: 0.55
  x: 0
  y: 0
  dx: 1
  dy: 1
platinum:
  application_file: "cryo_Pt_dep"
  gas: "Pt cryo"
  position: "cryo"
  whole_grid:
    time: 20
    hfw: 30e-6
    length: 7e-6
  weld:
    time: 20
    hfw: 100e-6
    length: 15e-6
